/*! @preserve
 * bstreeview.js
 * Version: 1.0.0
 * Authors: Sami CHNITER <sami.chniter@gmail.com>
 * Copyright 2020
 * License: Apache License 2.0
 *
 * Project: https://github.com/chniter/bstreeview
 */
(function(f,d,a,h){var e="bstreeview",g={expandIcon:"fa fa-angle-down",collapseIcon:"fa fa-angle-right",indent:1.25};var c={treeview:'<div class="bstreeview"></div>',treeviewItem:'<div href="#itemid" class="list-group-item" data-toggle="collapse"></div>',treeviewGroupItem:'<div class="list-group collapse" id="itemid"></div>',treeviewItemStateIcon:'<i class="state-icon"></i>',treeviewItemIcon:'<i class="item-icon"></i>'};function b(j,i){this.element=j;this.itemIdPrefix=j.id+"-item-";this.settings=f.extend({},g,i);this.init()}f.extend(b.prototype,{init:function(){this.tree=[];this.nodes=[];if(this.settings.data){this.settings.data=f.parseJSON(this.settings.data);this.tree=f.extend(true,[],this.settings.data);delete this.settings.data}f(this.element).addClass("bstreeview");this.initData({nodes:this.tree});var i=this;this.build(f(this.element),this.tree,0);f(".bstreeview").on("click",".list-group-item",function(){f(".state-icon",this).toggleClass(i.settings.expandIcon).toggleClass(i.settings.collapseIcon)})},initData:function(k){if(!k.nodes){return}var i=k;var l=this;f.each(k.nodes,function j(m,n){n.nodeId=l.nodes.length;n.parentId=i.nodeId;l.nodes.push(n);if(n.nodes){l.initData(n)}})},build:function(i,k,m){var n=this;var l="1.25rem;";if(m>0){l=(n.settings.indent+m*n.settings.indent).toString()+"rem;"}m+=1;f.each(k,function j(t,r){var s=f(c.treeviewItem).attr("href","#"+n.itemIdPrefix+r.nodeId).attr("style","padding-left:"+l);if(r.nodes){var q=f(c.treeviewItemStateIcon).addClass(n.settings.collapseIcon);s.append(q)}if(r.icon){var o=f(c.treeviewItemIcon).addClass(r.icon);s.append(o)}s.append(r.text);i.append(s);if(r.nodes){var p=f(c.treeviewGroupItem).attr("id",n.itemIdPrefix+r.nodeId);i.append(p);n.build(p,r.nodes,m)}})}});f.fn[e]=function(i){return this.each(function(){if(!f.data(this,"plugin_"+e)){f.data(this,"plugin_"+e,new b(this,i))}})}})(jQuery,window,document);